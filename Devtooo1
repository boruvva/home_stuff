#!/bin/bash

# Create temporary directory and files for testing
mkdir -p test_dir
echo "Hello World" > test_dir/testfile1.txt
echo "Goodbye World" > test_dir/testfile2.txt

# Test function to run search script and compare output
run_test() {
    local search_string=$1
    local expected_output=$2

    echo "Running test for string '$search_string'..."
    actual_output=$(./search_script.sh test_dir "$search_string")
    if [ "$actual_output" == "$expected_output" ]; then
        echo "Test passed."
    else
        echo "Test failed."
        echo "Expected: $expected_output"
        echo "Got: $actual_output"
    fi
}

# Test cases
expected_output_hello="test_dir/testfile1.txt:Hello World"
expected_output_goodbye="test_dir/testfile2.txt:Goodbye World"
expected_output_not_found=""

run_test "Hello" "$expected_output_hello"
run_test "Goodbye" "$expected_output_goodbye"
run_test "NotFound" "$expected_output_not_found"

# Clean up test files and directories
rm -rf test_dir
echo "All tests completed and test files removed."
