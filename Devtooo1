#!/bin/bash

# Function to create a test input file
create_test_file() {
    input_file="test_input.txt"
    echo -e "A\nB\nC\nD" > ${input_file}
}

# Function to run a test case
run_test() {
    local filename=$1
    local expected_output=$2

    echo "Running test for file '$filename'..."
    ./transform_script.sh ${filename}

    # Verify the output
    output_file="output_${filename}"
    if [ -f ${output_file} ]; then
        actual_output=$(cat ${output_file})
        if [ "$actual_output" == "$expected_output" ]; then
            echo "Test passed."
        else
            echo "Test failed."
            echo "Expected: $expected_output"
            echo "Got: $actual_output"
        fi
    else
        echo "Test failed. Output file not found."
    fi
}

# Main function to execute the tests
main() {
    create_test_file

    # Expected output
    expected_output="'A',\n'B',\n'C',\n'D',\n"

    # Run test
    run_test "test_input.txt" "$expected_output"

    # Clean up
    rm -f test_input.txt output_test_input.txt
    echo "All tests completed and test files removed."
}

# Execute the main function
main
